CREATE DATABASE vikings CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
DROP TABLE IF EXISTS Projet ; CREATE TABLE Projet (id_Projet BIGINT AUTO_INCREMENT NOT NULL, nom VARCHAR(30), description_Projet TEXT, workflow_id_workflow BIGINT, PRIMARY KEY (id_Projet)) ENGINE=InnoDB;  DROP TABLE IF EXISTS Workflow ; CREATE TABLE Workflow (id_Workflow BIGINT AUTO_INCREMENT NOT NULL, nom VARCHAR(30), description TEXT, projet_id_projet BIGINT, PRIMARY KEY (id_Workflow)) ENGINE=InnoDB;  DROP TABLE IF EXISTS Etape ; CREATE TABLE Etape (id_Etape BIGINT AUTO_INCREMENT NOT NULL, nom VARCHAR(30), objectif VARCHAR(255), importance INT, valide_Etape BOOLEAN, version_Etape VARCHAR(30), id_Langage BIGINT, id_Workflow BIGINT, PRIMARY KEY (id_Etape)) ENGINE=InnoDB;  DROP TABLE IF EXISTS Langage ; CREATE TABLE Langage (id_Langage BIGINT AUTO_INCREMENT NOT NULL, nom VARCHAR(30), PRIMARY KEY (id_Langage)) ENGINE=InnoDB;  DROP TABLE IF EXISTS Utilisateur ; CREATE TABLE Utilisateur (id_Utilisateur BIGINT AUTO_INCREMENT NOT NULL, username_Utilisateur VARCHAR(30), email_Utilisateur VARCHAR(42), firstname_Utilisateur VARCHAR(30), lastname_Utilisateur VARCHAR(30), password_Utilisateur VARCHAR(255), PRIMARY KEY (id_Utilisateur)) ENGINE=InnoDB;  DROP TABLE IF EXISTS Variable_Env ; CREATE TABLE Variable_Env (id_Variable_Env BIGINT AUTO_INCREMENT NOT NULL, libelle_Variable_Env VARCHAR(30), valeur_Variable_Env VARCHAR(255), id_Etape BIGINT, PRIMARY KEY (id_Variable_Env)) ENGINE=InnoDB;  DROP TABLE IF EXISTS est_Mene_User ; CREATE TABLE est_Mene_User (id_Projet BIGINT, id_Utilisateur BIGINT, PRIMARY KEY (id_Projet,  id_Utilisateur)) ENGINE=InnoDB;  DROP TABLE IF EXISTS est_Cree_User ; CREATE TABLE est_Cree_User (id_Utilisateur BIGINT, id_Projet BIGINT, date_creation_est_Cree_User DATE, PRIMARY KEY (id_Utilisateur,  id_Projet)) ENGINE=InnoDB;  ALTER TABLE Projet ADD CONSTRAINT FK_Projet_workflow_id_workflow FOREIGN KEY (workflow_id_workflow) REFERENCES Workflow (id_Workflow); ALTER TABLE Workflow ADD CONSTRAINT FK_Workflow_projet_id_projet FOREIGN KEY (projet_id_projet) REFERENCES Projet (id_Projet); ALTER TABLE Etape ADD CONSTRAINT FK_Etape_id_Langage FOREIGN KEY (id_Langage) REFERENCES Langage (id_Langage); ALTER TABLE Etape ADD CONSTRAINT FK_Etape_id_Workflow FOREIGN KEY (id_Workflow) REFERENCES Workflow (id_Workflow); ALTER TABLE Variable_Env ADD CONSTRAINT FK_Variable_Env_id_Etape FOREIGN KEY (id_Etape) REFERENCES Etape (id_Etape); ALTER TABLE est_Mene_User ADD CONSTRAINT FK_est_Mene_User_id_Projet FOREIGN KEY (id_Projet) REFERENCES Projet (id_Projet); ALTER TABLE est_Mene_User ADD CONSTRAINT FK_est_Mene_User_id_Utilisateur FOREIGN KEY (id_Utilisateur) REFERENCES Utilisateur (id_Utilisateur); ALTER TABLE est_Cree_User ADD CONSTRAINT FK_est_Cree_User_id_Utilisateur FOREIGN KEY (id_Utilisateur) REFERENCES Utilisateur (id_Utilisateur); ALTER TABLE est_Cree_User ADD CONSTRAINT FK_est_Cree_User_id_Projet FOREIGN KEY (id_Projet) REFERENCES Projet (id_Projet); 